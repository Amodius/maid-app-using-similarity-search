{"version":3,"sources":["./src/app/pages/cleanerlogin/cleanerlogin-routing.module.ts","./src/app/pages/cleanerlogin/cleanerlogin.module.ts","./src/app/pages/cleanerlogin/cleanerlogin.page.ts","./src/app/pages/cleanerlogin/cleanerlogin.page.scss","./src/app/pages/cleanerlogin/cleanerlogin.page.html"],"names":[],"mappings":"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","file":"src_app_pages_cleanerlogin_cleanerlogin_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CleanerloginPage } from './cleanerlogin.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CleanerloginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CleanerloginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CleanerloginPageRoutingModule } from './cleanerlogin-routing.module';\n\nimport { CleanerloginPage } from './cleanerlogin.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CleanerloginPageRoutingModule\n  ],\n  declarations: [CleanerloginPage]\n})\nexport class CleanerloginPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Platform, MenuController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { LocalService } from '../../services/local.service';\nimport { RestService } from '../../services/rest.service';\nimport { UtilityService } from '../../services/utility.service';\nimport { EventsService } from '../../services/events.service';\n\nimport OneSignal from 'onesignal-cordova-plugin';\n\n@Component({\n  selector: 'app-cleanerlogin',\n  templateUrl: './cleanerlogin.page.html',\n  styleUrls: ['./cleanerlogin.page.scss'],\n})\nexport class CleanerloginPage implements OnInit {\n  cleaner: any = {\n    email: '',\n    password: '',\n  };\n  token: any = null;\n\n  constructor(\n    private platform: Platform,\n    private menu: MenuController,\n\n    public localService: LocalService,\n    public restService: RestService,\n    public utilityService: UtilityService,\n    public eventsService: EventsService,\n    private router: Router\n  ) {\n    this.platform.ready().then(() => {\n      OneSignal.setAppId(this.utilityService.config.onesignalAppId);\n\n      OneSignal.getDeviceState((stateChanges) =>{\n        console.log('login: ' + JSON.parse(JSON.stringify(stateChanges)).userId);\n        this.token = JSON.parse(JSON.stringify(stateChanges)).userId;\n        console.log(\"this.token\",this.token);\n      });\n    })\n  }\n\n  ngOnInit() {}\n\n  login() {\n    if (this.cleaner.email === '') {\n      return this.utilityService.openAlerts('Error', 'Email required', 'ok');\n    }\n    if (this.cleaner.password === '') {\n      return this.utilityService.openAlerts('Error', 'Password required', 'ok');\n    }\n    this.cleaner.device = this.getPlatform();\n    this.cleaner.token = this.token;\n    this.utilityService.loadingOpen('Authenticating...');\n    this.restService.postData('cleaner/login', this.cleaner).subscribe(\n      (data) => {\n        this.localService.setCleaner(data);\n        // refresh the menu : send event\n        this.menu.enable(true);\n        this.eventsService.publish('menu', 'cleaner');\n        this.utilityService.loadingClose();\n        this.checkedIfCleanerVerified(this.localService.getCleaner().id);\n      },\n      (err) => {\n        this.utilityService.loadingClose();\n        return this.utilityService.openAlerts('Error', 'Login failed.', 'ok');\n      }\n    );\n  }\n  register() {\n    this.router.navigate(['/cleanerregister']);\n  }\n  forgot() {\n    this.router.navigate(['/cleanerforgot']);\n  }\n  user() {\n    this.router.navigate(['/login']);\n  }\n\n  getPlatform() {\n    if (this.platform.is('ios') || this.platform.is('ipad')) {\n      return 'ios';\n    } else if (this.platform.is('android')) {\n      return 'android';\n    } else {\n      return 'other';\n    }\n  }\n\n  terms() {\n    this.router.navigate(['/terms']);\n  }\n  privacy() {\n    this.router.navigate(['/privacy']);\n  }\n\n  checkedIfCleanerVerified(id) {\n    // check verification status\n    this.restService\n      .getData('cleaner/' + id + '/checkverification')\n      .subscribe(\n        (callback) => {\n          this.router.navigateByUrl('/cleanerhome', {replaceUrl: true});\n        },\n        (failed) => {\n          if (failed.status === 404) {\n            // need to submit details\n            this.router.navigateByUrl('/cleanermoredetails?mode=new', {\n              replaceUrl: true,\n            });\n          } else if (failed.status === 401) {\n            // pending - wait for review\n            this.router.navigateByUrl('/cleanermoredetails?mode=pending', {\n              replaceUrl: true,\n            });\n          } else if (failed.status === 403) {\n            // rejected - resubmit details\n            this.router.navigateByUrl(\n              '/cleanermoredetails?mode=rejected&reason=' + failed.error.reason,\n              { replaceUrl: true }\n            );\n          } else {\n            return this.utilityService.openAlerts(\n              'Oops!',\n              'Sorry server error, Please restart the app.',\n              'ok'\n            );\n          }\n        }\n      );\n  }\n}\n","export default \".trms {\\n  color: var(--ion-color-gray);\\n  text-align: center;\\n  text-transform: uppercase;\\n  font-size: 0.8rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsZWFuZXJsb2dpbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw0QkFBQTtFQUNBLGtCQUFBO0VBQ0EseUJBQUE7RUFDQSxpQkFBQTtBQUNGIiwiZmlsZSI6ImNsZWFuZXJsb2dpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudHJtc3tcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1ncmF5KTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICBmb250LXNpemU6IDAuOHJlbTtcbn1cbiJdfQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <img class=\\\"logo\\\" src=\\\"{{utilityService.config.adminBaseUrl}}/uploads/images/{{localService.getSettings().image}}\\\" height=\\\"40\\\">\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <div class=\\\"login-container\\\">\\n      <div class=\\\"login-image-container\\\" *ngIf=\\\"localService.getSettings().login_image\\\" >\\n        <img class=\\\"login-image\\\" src=\\\"{{utilityService.config.adminBaseUrl}}/uploads/images/{{localService.getSettings().cleaner_login_image}}\\\"/>\\n      </div>\\n\\n      <h4 class=\\\"heading-title ion-text-center ion-text-uppercase\\\">Cleaner Login</h4>\\n      <ion-input clearInput type=\\\"text\\\" placeholder=\\\"EMAIL ADDRESS\\\" [(ngModel)]=\\\"cleaner.email\\\" (ngModelChange)=\\\"cleaner.email = $event.toLocaleLowerCase()\\\"></ion-input>\\n      <ion-input clearInput type=\\\"password\\\" placeholder=\\\"PASSWORD\\\" [(ngModel)]=\\\"cleaner.password\\\"></ion-input>\\n      <ion-button expand=\\\"block\\\" class=\\\"base-button\\\" (click)=\\\"login()\\\">LOGIN</ion-button>\\n\\n      <div class=\\\"action-links\\\">\\n        <ul>\\n          <li (click)=\\\"forgot()\\\">Forgot Password?</li>\\n          <li (click)=\\\"register()\\\">Register here</li>\\n        </ul>\\n      </div>\\n\\n      <ion-button expand=\\\"block\\\" class=\\\"base-button cleaner-btn\\\" (click)=\\\"user()\\\">I'M A USER</ion-button>\\n\\n      <p class=\\\"ion-text-center trms\\\">By using this app you are agreeing to our <span class=\\\"tnc\\\" (click)=\\\"terms()\\\">Terms & Conditions</span>, <span class=\\\"tnc\\\" (click)=\\\"privacy()\\\">GDPR</span> and <span class=\\\"tnc\\\" (click)=\\\"privacy()\\\">Privacy Policy</span></p>\\n\\n  </div>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}