{"version":3,"sources":["./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.ts","./src/app/pages/login/login.page.scss","./src/app/pages/login/login.page.html"],"names":[],"mappings":"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","file":"src_app_pages_login_login_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { Component, OnInit } from '@angular/core';\nimport { Platform, MenuController } from '@ionic/angular';\n\nimport { Router } from '@angular/router';\nimport { LocalService } from '../../services/local.service';\nimport { RestService } from '../../services/rest.service';\nimport { UtilityService } from '../../services/utility.service';\nimport { EventsService } from '../../services/events.service';\n\nimport OneSignal from 'onesignal-cordova-plugin';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  user: any = {\n    email: '',\n    password: '',\n  };\n  token: any = null;\n\n  constructor(\n    private platform: Platform,\n    private menu: MenuController,\n\n    public localService: LocalService,\n    public restService: RestService,\n    public utilityService: UtilityService,\n    public eventsService: EventsService,\n    private router: Router\n  ) {\n    this.platform.ready().then(() => {\n      OneSignal.setAppId(this.utilityService.config.onesignalAppId);\n\n      OneSignal.getDeviceState((stateChanges) =>{\n        console.log('login: ' + JSON.parse(JSON.stringify(stateChanges)).userId);\n        this.token = JSON.parse(JSON.stringify(stateChanges)).userId;\n        console.log(\"this.token\",this.token);\n      });\n    })\n  }\n\n  ngOnInit() {}\n\n  login() {\n    if (this.user.email === '') {\n      return this.utilityService.openAlerts('Error', 'Email required', 'ok');\n    }\n    if (this.user.password === '') {\n      return this.utilityService.openAlerts('Error', 'Password required', 'ok');\n    }\n    this.user.device = this.getPlatform();\n    this.user.token = this.token;\n    this.utilityService.loadingOpen('Authenticating...');\n    this.restService.postData('user/login', this.user).subscribe(\n      (data) => {\n        this.localService.setUser(data);\n        // refresh the menu : send event\n        this.menu.enable(true);\n        this.eventsService.publish('menu', 'user');\n        this.utilityService.loadingClose();\n\n        this.router.navigateByUrl('/book', {replaceUrl: true});\n      },\n      (err) => {\n        this.utilityService.loadingClose();\n        return this.utilityService.openAlerts('Error', 'Login failed.', 'ok');\n      }\n    );\n  }\n  register() {\n    this.router.navigate(['/signup']);\n  }\n  forgot() {\n    this.router.navigate(['/forgot']);\n  }\n  cleaner() {\n    this.router.navigate(['/cleanerlogin'], {replaceUrl: true});\n  }\n\n  getPlatform() {\n    if (this.platform.is('ios') || this.platform.is('ipad')) {\n      return 'ios';\n    } else if (this.platform.is('android')) {\n      return 'android';\n    } else {\n      return 'other';\n    }\n  }\n\n  terms() {\n    this.router.navigate(['/terms']);\n  }\n  privacy() {\n    this.router.navigate(['/privacy']);\n  }\n}\n","export default \".fb-btn {\\n  --background: #3b5998;\\n}\\n\\n.gp-btn {\\n  --background:transparent;\\n  --color: var(--ion-color-black);\\n  border: 1px solid var(--ion-color-light);\\n  border-radius: 5px;\\n}\\n\\n.apple-btn {\\n  --background: #000;\\n  --color: var(--ion-color-white);\\n}\\n\\n.trms {\\n  color: var(--ion-color-gray);\\n  text-align: center;\\n  text-transform: uppercase;\\n  font-size: 0.8rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHFCQUFBO0FBQ0Y7O0FBQ0E7RUFDRSx3QkFBQTtFQUNBLCtCQUFBO0VBQ0Esd0NBQUE7RUFDQSxrQkFBQTtBQUVGOztBQUNBO0VBQ0Usa0JBQUE7RUFDQSwrQkFBQTtBQUVGOztBQUNBO0VBQ0UsNEJBQUE7RUFDQSxrQkFBQTtFQUNBLHlCQUFBO0VBQ0EsaUJBQUE7QUFFRiIsImZpbGUiOiJsb2dpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZmItYnRue1xuICAtLWJhY2tncm91bmQ6ICMzYjU5OTg7XG59XG4uZ3AtYnRue1xuICAtLWJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7XG4gIC0tY29sb3I6IHZhcigtLWlvbi1jb2xvci1ibGFjayk7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWlvbi1jb2xvci1saWdodCk7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbn1cblxuLmFwcGxlLWJ0bntcbiAgLS1iYWNrZ3JvdW5kOiAjMDAwO1xuICAtLWNvbG9yOiB2YXIoLS1pb24tY29sb3Itd2hpdGUpO1xufVxuXG4udHJtc3tcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1ncmF5KTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICBmb250LXNpemU6IDAuOHJlbTtcbn1cbiJdfQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <img class=\\\"logo\\\" src=\\\"{{utilityService.config.adminBaseUrl}}/uploads/images/{{localService.getSettings().image}}\\\" height=\\\"40\\\">\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <div class=\\\"login-container\\\">\\n      <div class=\\\"login-image-container\\\" *ngIf=\\\"localService.getSettings().login_image\\\" >\\n        <img class=\\\"login-image\\\" src=\\\"{{utilityService.config.adminBaseUrl}}/uploads/images/{{localService.getSettings().login_image}}\\\"/>\\n      </div>\\n      <h4 class=\\\"heading-title ion-text-center ion-text-uppercase\\\">User Login</h4>\\n      <ion-input clearInput type=\\\"text\\\" placeholder=\\\"EMAIL ADDRESS\\\" [(ngModel)]=\\\"user.email\\\" (ngModelChange)=\\\"user.email = $event.toLocaleLowerCase()\\\"></ion-input>\\n      <ion-input clearInput type=\\\"password\\\" placeholder=\\\"PASSWORD\\\" [(ngModel)]=\\\"user.password\\\"></ion-input>\\n      <ion-button expand=\\\"block\\\" class=\\\"base-button\\\" (click)=\\\"login()\\\">LOGIN</ion-button>\\n\\n      <div class=\\\"action-links\\\">\\n        <ul>\\n          <li (click)=\\\"forgot()\\\">Forgot Password?</li>\\n          <li (click)=\\\"register()\\\">Register here</li>\\n        </ul>\\n      </div>\\n\\n      <ion-button expand=\\\"block\\\" class=\\\"base-button cleaner-btn\\\" (click)=\\\"cleaner()\\\">I'M A CLEANER</ion-button>\\n\\n      <p class=\\\"ion-text-center trms\\\">By using this app you are agreeing to our <span class=\\\"tnc\\\" (click)=\\\"terms()\\\">Terms & Conditions</span>, <span class=\\\"tnc\\\" (click)=\\\"privacy()\\\">GDPR</span> and <span class=\\\"tnc\\\" (click)=\\\"privacy()\\\">Privacy Policy</span></p>\\n\\n  </div>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}