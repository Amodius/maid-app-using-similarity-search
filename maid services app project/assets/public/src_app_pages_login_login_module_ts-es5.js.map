{"version":3,"sources":["webpack:///src/app/pages/login/login-routing.module.ts","webpack:///src/app/pages/login/login.module.ts","webpack:///src/app/pages/login/login.page.ts","webpack:///src/app/pages/login/login.page.scss","webpack:///src/app/pages/login/login.page.html"],"names":["routes","path","component","LoginPage","LoginPageRoutingModule","NgModule","imports","RouterModule","exports","LoginPageModule","CommonModule","FormsModule","IonicModule","declarations","platform","menu","localService","restService","utilityService","eventsService","router","user","email","password","token","ready","then","config","onesignalAppId","stateChanges","console","log","JSON","parse","stringify","userId","openAlerts","device","getPlatform","loadingOpen","postData","subscribe","data","setUser","enable","publish","loadingClose","navigateByUrl","replaceUrl","err","navigate","is","Platform","MenuController","LocalService","RestService","UtilityService","EventsService","Router","Component","selector","template"],"mappings":"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","file":"src_app_pages_login_login_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { Component, OnInit } from '@angular/core';\nimport { Platform, MenuController } from '@ionic/angular';\n\nimport { Router } from '@angular/router';\nimport { LocalService } from '../../services/local.service';\nimport { RestService } from '../../services/rest.service';\nimport { UtilityService } from '../../services/utility.service';\nimport { EventsService } from '../../services/events.service';\n\nimport OneSignal from 'onesignal-cordova-plugin';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  user: any = {\n    email: '',\n    password: '',\n  };\n  token: any = null;\n\n  constructor(\n    private platform: Platform,\n    private menu: MenuController,\n\n    public localService: LocalService,\n    public restService: RestService,\n    public utilityService: UtilityService,\n    public eventsService: EventsService,\n    private router: Router\n  ) {\n    this.platform.ready().then(() => {\n      OneSignal.setAppId(this.utilityService.config.onesignalAppId);\n\n      OneSignal.getDeviceState((stateChanges) =>{\n        console.log('login: ' + JSON.parse(JSON.stringify(stateChanges)).userId);\n        this.token = JSON.parse(JSON.stringify(stateChanges)).userId;\n        console.log(\"this.token\",this.token);\n      });\n    })\n  }\n\n  ngOnInit() {}\n\n  login() {\n    if (this.user.email === '') {\n      return this.utilityService.openAlerts('Error', 'Email required', 'ok');\n    }\n    if (this.user.password === '') {\n      return this.utilityService.openAlerts('Error', 'Password required', 'ok');\n    }\n    this.user.device = this.getPlatform();\n    this.user.token = this.token;\n    this.utilityService.loadingOpen('Authenticating...');\n    this.restService.postData('user/login', this.user).subscribe(\n      (data) => {\n        this.localService.setUser(data);\n        // refresh the menu : send event\n        this.menu.enable(true);\n        this.eventsService.publish('menu', 'user');\n        this.utilityService.loadingClose();\n\n        this.router.navigateByUrl('/book', {replaceUrl: true});\n      },\n      (err) => {\n        this.utilityService.loadingClose();\n        return this.utilityService.openAlerts('Error', 'Login failed.', 'ok');\n      }\n    );\n  }\n  register() {\n    this.router.navigate(['/signup']);\n  }\n  forgot() {\n    this.router.navigate(['/forgot']);\n  }\n  cleaner() {\n    this.router.navigate(['/cleanerlogin'], {replaceUrl: true});\n  }\n\n  getPlatform() {\n    if (this.platform.is('ios') || this.platform.is('ipad')) {\n      return 'ios';\n    } else if (this.platform.is('android')) {\n      return 'android';\n    } else {\n      return 'other';\n    }\n  }\n\n  terms() {\n    this.router.navigate(['/terms']);\n  }\n  privacy() {\n    this.router.navigate(['/privacy']);\n  }\n}\n","export default \".fb-btn {\\n  --background: #3b5998;\\n}\\n\\n.gp-btn {\\n  --background:transparent;\\n  --color: var(--ion-color-black);\\n  border: 1px solid var(--ion-color-light);\\n  border-radius: 5px;\\n}\\n\\n.apple-btn {\\n  --background: #000;\\n  --color: var(--ion-color-white);\\n}\\n\\n.trms {\\n  color: var(--ion-color-gray);\\n  text-align: center;\\n  text-transform: uppercase;\\n  font-size: 0.8rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHFCQUFBO0FBQ0Y7O0FBQ0E7RUFDRSx3QkFBQTtFQUNBLCtCQUFBO0VBQ0Esd0NBQUE7RUFDQSxrQkFBQTtBQUVGOztBQUNBO0VBQ0Usa0JBQUE7RUFDQSwrQkFBQTtBQUVGOztBQUNBO0VBQ0UsNEJBQUE7RUFDQSxrQkFBQTtFQUNBLHlCQUFBO0VBQ0EsaUJBQUE7QUFFRiIsImZpbGUiOiJsb2dpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZmItYnRue1xuICAtLWJhY2tncm91bmQ6ICMzYjU5OTg7XG59XG4uZ3AtYnRue1xuICAtLWJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7XG4gIC0tY29sb3I6IHZhcigtLWlvbi1jb2xvci1ibGFjayk7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWlvbi1jb2xvci1saWdodCk7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbn1cblxuLmFwcGxlLWJ0bntcbiAgLS1iYWNrZ3JvdW5kOiAjMDAwO1xuICAtLWNvbG9yOiB2YXIoLS1pb24tY29sb3Itd2hpdGUpO1xufVxuXG4udHJtc3tcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1ncmF5KTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICBmb250LXNpemU6IDAuOHJlbTtcbn1cbiJdfQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <img class=\\\"logo\\\" src=\\\"{{utilityService.config.adminBaseUrl}}/uploads/images/{{localService.getSettings().image}}\\\" height=\\\"40\\\">\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <div class=\\\"login-container\\\">\\n      <div class=\\\"login-image-container\\\" *ngIf=\\\"localService.getSettings().login_image\\\" >\\n        <img class=\\\"login-image\\\" src=\\\"{{utilityService.config.adminBaseUrl}}/uploads/images/{{localService.getSettings().login_image}}\\\"/>\\n      </div>\\n      <h4 class=\\\"heading-title ion-text-center ion-text-uppercase\\\">User Login</h4>\\n      <ion-input clearInput type=\\\"text\\\" placeholder=\\\"EMAIL ADDRESS\\\" [(ngModel)]=\\\"user.email\\\" (ngModelChange)=\\\"user.email = $event.toLocaleLowerCase()\\\"></ion-input>\\n      <ion-input clearInput type=\\\"password\\\" placeholder=\\\"PASSWORD\\\" [(ngModel)]=\\\"user.password\\\"></ion-input>\\n      <ion-button expand=\\\"block\\\" class=\\\"base-button\\\" (click)=\\\"login()\\\">LOGIN</ion-button>\\n\\n      <div class=\\\"action-links\\\">\\n        <ul>\\n          <li (click)=\\\"forgot()\\\">Forgot Password?</li>\\n          <li (click)=\\\"register()\\\">Register here</li>\\n        </ul>\\n      </div>\\n\\n      <ion-button expand=\\\"block\\\" class=\\\"base-button cleaner-btn\\\" (click)=\\\"cleaner()\\\">I'M A CLEANER</ion-button>\\n\\n      <p class=\\\"ion-text-center trms\\\">By using this app you are agreeing to our <span class=\\\"tnc\\\" (click)=\\\"terms()\\\">Terms & Conditions</span>, <span class=\\\"tnc\\\" (click)=\\\"privacy()\\\">GDPR</span> and <span class=\\\"tnc\\\" (click)=\\\"privacy()\\\">Privacy Policy</span></p>\\n\\n  </div>\\n</ion-content>\\n\";"]}